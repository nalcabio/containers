# -*- coding: utf-8; mode: dockerfile; -*-
FROM docker.io/library/debian:trixie
LABEL maintainer="Tom Vaughan <tom@nalca.bio>"

ENV LC_ALL=C.UTF-8 LANG=C.UTF-8

RUN export DEBIAN_FRONTEND=noninteractive                                       \
    && apt -q update                                                            \
    && apt -q dist-upgrade -y                                                   \
    && apt -q install -y                                                        \
        catatonit                                                               \
        curl                                                                    \
        direnv                                                                  \
        fuse-overlayfs                                                          \
        git                                                                     \
        make                                                                    \
        nodejs                                                                  \
        npm                                                                     \
        podman                                                                  \
        qemu-user-binfmt                                                        \
        slirp4netns                                                             \
        uidmap                                                                  \
    && apt -q clean                                                             \
    && rm -rf /var/lib/apt/lists/*

WORKDIR /mnt/workdir

ENTRYPOINT ["catatonit", "--"]

CMD ["bash"]
