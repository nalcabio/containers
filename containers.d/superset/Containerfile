# -*- coding: utf-8; mode: dockerfile; -*-
FROM docker.io/apache/superset:6.0.0
LABEL maintainer="Tom Vaughan <tom@nalca.bio>"

ENV LC_ALL=C.UTF-8 LANG=C.UTF-8

# https://superset.apache.org/docs/installation/docker-builds/#building-your-own-production-docker-image

USER root

RUN . /app/.venv/bin/activate \
    && uv pip install -n authlib==1.6.6 elasticsearch-dbapi==0.2.11 pillow==12.1.0 psycopg2-binary==2.9.11

COPY superset/ /var/opt/superset/

USER superset

ENV SUPERSET_CONFIG_PATH=/var/opt/superset/etc/superset.py
